services:
  nubbybot:
    build: .
    container_name: nubbybot
    restart: unless-stopped
    environment:
      - DISCORD_TOKEN=${DISCORD_TOKEN}
      - DISCORD_APP_ID=1363093908526993509
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - DB_PATH=/db/nubbybot.db
      - LOG_LEVEL=info
      - BACKFILL_BATCH_DELAY_MS=1000
      - PROFILE_UPDATE_INTERVAL_HOURS=24
    volumes:
      - ./db:/db
    logging:
      driver: json-file
      options:
        max-size: "10m"
        max-file: "3"
